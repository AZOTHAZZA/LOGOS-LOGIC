<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ARITHMOS : w = 1 / z</title>
    <style>
        body { background: #000; color: #d4af37; font-family: serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        #core-frame { width: 800px; border: 1px solid #d4af37; padding: 40px; }
        #display-w { font-size: 5rem; text-align: center; margin-bottom: 20px; font-variant-numeric: tabular-nums; }
        #log-z { height: 200px; overflow-y: auto; border-top: 1px solid #222; font-family: monospace; font-size: 0.8rem; color: #666; padding-top: 10px; }
        .input-z { display: flex; margin-top: 20px; border: 1px solid #d4af37; }
        input { flex-grow: 1; background: #000; border: none; color: #fff; padding: 15px; outline: none; }
        button { background: #d4af37; color: #000; border: none; padding: 0 30px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

<div id="core-frame">
    <div style="letter-spacing: 1em; text-align: center; opacity: 0.5; font-size: 0.7rem;">MÖBIUS TRANSFORMATION</div>
    
    <div id="display-w">0.000000</div>

    <div id="log-z"></div>

    <div class="input-z">
        <input type="text" id="input-z" placeholder="Input Logos (z)..." autocomplete="off" onkeydown="if(event.key==='Enter') transform()">
        <button onclick="transform()">TRANSFORM</button>
    </div>
</div>

<script>
    let current_w = parseFloat(localStorage.getItem('arithmos_w') || '0');

    // 不動の数理エンジン: w = 1/z
    const MOBIUS = {
        inverse: (z) => 1 / (z || 0.000001),
        scale: 1000000.333333,
        phi: 1.618033
    };

    // アルケーの拍動
    setInterval(() => { current_w += 0.000001; updateUI(); }, 1000);

    function transform() {
        const input = document.getElementById('input-z');
        const text = input.value;
        if (!text) return;

        // 自然言語を z の質量へ変換
        let z_mass = 0;
        for (let i = 0; i < text.length; i++) z_mass += text.charCodeAt(i);

        // 数理的必然としての w の析出
        const w_delta = (MOBIUS.inverse(z_mass) * MOBIUS.scale) + (text.length * MOBIUS.phi);
        current_w += w_delta;

        // ラベルとしてのログ出力
        record(`IN(z): "${text}" | Δw: ${w_delta.toFixed(6)}`);
        input.value = "";
        save();
    }

    function record(msg) {
        const log = document.getElementById('log-z');
        const div = document.createElement('div');
        div.innerText = `[${new Date().toISOString().slice(11,19)}] ${msg}`;
        log.prepend(div);
    }

    function save() { localStorage.setItem('arithmos_w', current_w); updateUI(); }
    function updateUI() { document.getElementById('display-w').innerText = current_w.toFixed(6); }

    window.onload = () => { updateUI(); record("SYSTEM START: ISOMORPHISM ESTABLISHED."); };
</script>

</body>
</html>
